<!DOCTYPE html>
btn.addEventListener('click',()=>{
qsa('.tab').forEach(b=>b.classList.remove('active'));
btn.classList.add('active');
qsa('.pane').forEach(p=>p.classList.remove('active'));
qs('#pane-'+btn.dataset.tab).classList.add('active');
})
})


// Sample data in LocalStorage
const mezziKey='pa_mezzi', bookKey='pa_book', shiftKey='pa_shift', noteKey='pa_note';
function initTables(){
// Mezzi
const mz = JSON.parse(localStorage.getItem(mezziKey) || '[{"targa":"AB123CD","tipo":"Ambulanza","stato":"Disponibile","note":"O2 pieno"}]');
renderMezzi(mz);
// Bookings
const bk = JSON.parse(localStorage.getItem(bookKey) || '[]');
renderBookings(bk);
// Shifts
const sh = JSON.parse(localStorage.getItem(shiftKey) || '[]');
renderShifts(sh);
// Notes
qs('#note').value = localStorage.getItem(noteKey)||'';
}
function renderMezzi(arr){
const body = qs('#mezzi-body'); body.innerHTML='';
arr.forEach((m,i)=>{
const tr=document.createElement('tr');
tr.innerHTML = `<td>${m.targa}</td><td>${m.tipo}</td><td>${m.stato}</td><td>${m.note||''}</td>`;
body.appendChild(tr);
});
localStorage.setItem(mezziKey, JSON.stringify(arr));
}
function addMezzo(){
const arr = JSON.parse(localStorage.getItem(mezziKey)||'[]');
arr.push({targa:qs('#m-targa').value,tipo:qs('#m-tipo').value,stato:qs('#m-stato').value,note:qs('#m-note').value});
renderMezzi(arr);
['#m-targa','#m-tipo','#m-stato','#m-note'].forEach(s=>qs(s).value='');
}
function renderBookings(arr){
const body = qs('#book-body'); body.innerHTML='';
arr.forEach(b=>{
const tr=document.createElement('tr');
tr.innerHTML = `<td>${b.data||''}</td><td>${b.paz||''}</td><td>${b.da||''} â†’ ${b.a||''}</td><td>${b.presidi||''}</td><td>${b.stato||''}</td>`;
body.appendChild(tr);
});
localStorage.setItem(bookKey, JSON.stringify(arr));
}
function addBooking(){
const arr = JSON.parse(localStorage.getItem(bookKey)||'[]');
arr.push({data:qs('#b-data').value,paz:qs('#b-paz').value,da:qs('#b-da').value,a:qs('#b-a').value,presidi:qs('#b-presidi').value,stato:qs('#b-stato').value});
renderBookings(arr);
['#b-data','#b-paz','#b-da','#b-a','#b-presidi','#b-stato'].forEach(s=>qs(s).value='');
}
function renderShifts(arr){
const body = qs('#shift-body'); body.innerHTML='';
arr.forEach(t=>{
const tr=document.createElement('tr');
tr.innerHTML = `<td>${t.data||''}</td><td>${t.orario||''}</td><td>${t.eq||''}</td><td>${t.mezzo||''}</td>`;
body.appendChild(tr);
});
localStorage.setItem(shiftKey, JSON.stringify(arr));
}
function addShift(){
const arr = JSON.parse(localStorage.getItem(shiftKey)||'[]');
arr.push({data:qs('#t-data').value,orario:qs('#t-orario').value,eq:qs('#t-eq').value,mezzo:qs('#t-mezzo').value});
renderShifts(arr);
['#t-data','#t-orario','#t-eq','#t-mezzo'].forEach(s=>qs(s).value='');
}
function saveNote(){
localStorage.setItem(noteKey, qs('#note').value);
alert('Note salvate sul dispositivo');
}


// Persist session demo
if(localStorage.getItem('pa_logged')==='1'){ showApp(); }
</script>
</body>
</html>
