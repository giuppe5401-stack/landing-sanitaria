<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gestionale – Pubblica Assistenza (Demo)</title>
  <link rel="stylesheet" href="gestionale.css" />
</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="brand">PUBBLICA ASSISTENZA</div>
      <nav class="nav">
        <a href="#gestionale">Gestionale</a>
        <a href="#volontari">Volontari</a>
      </nav>
    </div>
  </header>

  <!-- ================== AREA PERSONALE GESTIONALE ================== -->
  <section id="gestionale" class="section">
    <div class="container">

      <div class="section-head">
        <h1>Gestionale – Pubblica Assistenza</h1>
        <div class="actions">
          <button id="exportAllCsv" class="btn outline">Esporta CSV</button>
          <button id="resetDemo" class="btn danger outline">Azzera demo</button>
        </div>
      </div>

      <!-- KPI -->
      <div class="kpi-grid">
        <div class="card kpi">
          <div class="kpi-label">Richieste oggi</div>
          <div id="kpi-req-today" class="kpi-value">0</div>
        </div>
        <div class="card kpi">
          <div class="kpi-label">Turni odierni</div>
          <div id="kpi-shifts-today" class="kpi-value">0</div>
        </div>
        <div class="card kpi">
          <div class="kpi-label">Mezzi disponibili</div>
          <div id="kpi-vehicles-ready" class="kpi-value">0</div>
        </div>
        <div class="card kpi">
          <div class="kpi-label">Volontari attivi</div>
          <div id="kpi-volunteers-active" class="kpi-value">0</div>
        </div>
      </div>

      <div class="card tabs">
        <div class="tabbar">
          <button class="tab-btn active" data-tab="tab-richieste">Richieste</button>
          <button class="tab-btn" data-tab="tab-turni">Turni</button>
          <button class="tab-btn" data-tab="tab-mezzi">Mezzi</button>
          <button class="tab-btn" data-tab="tab-volontari">Volontari</button>
          <button class="tab-btn" data-tab="tab-report">Report</button>
          <div class="spacer"></div>
          <input id="globalSearch" type="search" class="input" placeholder="Cerca in tab…" />
        </div>

        <div class="tabcontent">

          <div id="tab-richieste">
            <div class="toolbar">
              <select id="filterReqStatus" class="input">
                <option value="">Stato: tutti</option>
                <option value="Nuova">Nuova</option>
                <option value="Pianificata">Pianificata</option>
                <option value="Completata">Completata</option>
                <option value="Annullata">Annullata</option>
              </select>
              <input id="filterReqDate" type="date" class="input" />
              <button id="addReqBtn" class="btn">+ Aggiungi richiesta</button>
            </div>
            <div class="table-wrap">
              <table id="tblRichieste" class="table">
                <thead>
                  <tr>
                    <th>Data/Ora</th>
                    <th>Paziente</th>
                    <th>Da → A</th>
                    <th>Note</th>
                    <th>Stato</th>
                    <th>Azioni</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>

          <div id="tab-turni" class="hidden">
            <div class="toolbar">
              <input id="filterShiftDate" type="date" class="input" />
              <button id="addShiftBtn" class="btn">+ Aggiungi turno</button>
            </div>
            <div class="table-wrap">
              <table id="tblTurni" class="table">
                <thead>
                  <tr>
                    <th>Data</th>
                    <th>Fascia</th>
                    <th>Mezzo</th>
                    <th>Equipaggio</th>
                    <th>Azioni</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>

          <div id="tab-mezzi" class="hidden">
            <div class="toolbar">
              <select id="filterVehicleState" class="input">
                <option value="">Stato: tutti</option>
                <option value="Disponibile">Disponibile</option>
                <option value="In servizio">In servizio</option>
                <option value="Officina">Officina</option>
              </select>
              <button id="addVehicleBtn" class="btn">+ Aggiungi mezzo</button>
            </div>
            <div class="table-wrap">
              <table id="tblMezzi" class="table">
                <thead>
                  <tr>
                    <th>Targa</th>
                    <th>Tipo</th>
                    <th>Stato</th>
                    <th>Note</th>
                    <th>Azioni</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>

          <div id="tab-volontari" class="hidden">
            <div class="toolbar">
              <input id="filterVolunteer" type="search" class="input" placeholder="Cerca volontario…" />
              <button id="addVolunteerBtn" class="btn">+ Aggiungi volontario</button>
            </div>
            <div class="table-wrap">
              <table id="tblVolontari" class="table">
                <thead>
                  <tr>
                    <th>Nome</th>
                    <th>Ruolo</th>
                    <th>Contatti</th>
                    <th>Disponibilità</th>
                    <th>Azioni</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>

          <div id="tab-report" class="hidden">
            <div class="toolbar">
              <input id="repFrom" type="date" class="input" />
              <input id="repTo" type="date" class="input" />
              <button id="buildReport" class="btn">Genera report</button>
            </div>
            <pre id="reportOut" class="report"></pre>
          </div>

        </div>
      </div>

    </div>

    <!-- Modal -->
    <dialog id="modal" class="modal">
      <form method="dialog" id="modalForm" class="modal-card">
        <div class="modal-head">
          <h3 id="modalTitle">Titolo</h3>
          <button id="modalClose" value="cancel" class="icon">✕</button>
        </div>
        <div id="modalBody" class="modal-body"></div>
        <div class="modal-foot">
          <button id="modalCancel" value="cancel" class="btn light">Annulla</button>
          <button id="modalOk" value="ok" class="btn">Salva</button>
        </div>
      </form>
    </dialog>
  </section>

  <script src="gestionale.js"></script>
</body>
</html>
